{"version":3,"file":"js/247.2854559b.js","mappings":"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","sources":["webpack://erabbit-client-pc/./src/views/Category/SubCategory.vue","webpack://erabbit-client-pc/./src/views/Category/components/SubBread.vue","webpack://erabbit-client-pc/./src/views/Category/components/SubBread.vue?1d9c","webpack://erabbit-client-pc/./src/views/Category/components/SubFilter.vue","webpack://erabbit-client-pc/./src/views/Category/components/SubFilter.vue?642a","webpack://erabbit-client-pc/./src/views/Category/components/SubSort.vue","webpack://erabbit-client-pc/./src/views/Category/components/SubSort.vue?26c9","webpack://erabbit-client-pc/./src/views/Category/SubCategory.vue?bdd5","webpack://erabbit-client-pc/./src/views/Category/components/GoodsItem.vue","webpack://erabbit-client-pc/./src/views/Category/components/GoodsItem.vue?fa5c"],"sourcesContent":["<template>\r\n  <div class=\"sub-category\">\r\n    <div class=\"wrapper\">\r\n      <!-- 面包屑 -->\r\n      <sub-bread></sub-bread>\r\n      <!-- 筛选区 -->\r\n      <sub-filter @filter-change=\"filterChange\"></sub-filter>\r\n      <!-- 商品面板（排序+列表） -->\r\n      <div class=\"goods-list\">\r\n        <sub-sort @sort-change=\"sortChange\"></sub-sort>\r\n        <ul>\r\n          <li v-for=\"goods in goodsList\" :key=\"goods.id\">\r\n            <goods-item :goods=\"goods\"></goods-item>\r\n          </li>\r\n        </ul>\r\n        <!-- 无限加载组件 -->\r\n        <xtx-infinite-loading :loading=\"loading\" :finished=\"finished\" @infinite=\"getData\"></xtx-infinite-loading>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport SubBread from '@/views/Category/components/SubBread.vue'\r\nimport SubFilter from '@/views/Category/components/SubFilter.vue'\r\nimport SubSort from '@/views/Category/components/SubSort.vue'\r\nimport GoodsItem from '@/views/Category/components/GoodsItem.vue'\r\nimport { useRoute } from 'vue-router'\r\nimport { ref, watch } from 'vue'\r\nimport { findSubCategoryGoods } from '@/api/category.js'\r\nexport default {\r\n  name: 'SubCategory',\r\n  components: {\r\n    SubBread,\r\n    SubFilter,\r\n    SubSort,\r\n    GoodsItem\r\n  },\r\n  setup () {\r\n    const route = useRoute()\r\n    // 加载中\r\n    const loading = ref(false)\r\n    // 是否加载完毕\r\n    const finished = ref(false)\r\n    // 商品列表数据\r\n    const goodsList = ref([])\r\n    // 请求参数\r\n    let reqParams = {\r\n      page: 1,\r\n      pageSize: 20\r\n    }\r\n    const getData = () => {\r\n      loading.value = true\r\n      // 设置二级分类的ID\r\n      reqParams.categoryId = route.params.id\r\n      findSubCategoryGoods(reqParams).then(({ result }) => {\r\n        // 获取数据成功\r\n        if (result.items.length) {\r\n          // 有数据就追加数据\r\n          goodsList.value.push(...result.items)\r\n          // 把page改成下一页页码\r\n          reqParams.page++\r\n        } else {\r\n          // 没有数据，代表加载完成\r\n          finished.value = true\r\n        }\r\n        loading.value = false\r\n      })\r\n    }\r\n    watch(() => route.params.id, (newVal) => {\r\n      if (newVal && `/category/sub/${newVal}` === route.path) {\r\n        finished.value = false\r\n        goodsList.value = [] // 导致列表空的，加载更多组件顶上来，进入可视区，去加载数据\r\n        reqParams = {\r\n          page: 1,\r\n          pageSize: 20\r\n        }\r\n      }\r\n    })\r\n    // 1.更改排序组件的筛选数据，重新请求\r\n    const sortChange = (sortParams) => {\r\n      finished.value = false\r\n      // 合并请求参数，保留之前参数\r\n      reqParams = { ...reqParams, ...sortParams }\r\n      reqParams.page = 1\r\n      goodsList.value = []\r\n    }\r\n    // 2.更改筛选组件的筛选数据，重新请求\r\n    const filterChange = (filterParams) => {\r\n      finished.value = false\r\n      // 合并请求参数，保留之前参数\r\n      reqParams = { ...reqParams, ...filterParams }\r\n      reqParams.page = 1\r\n      goodsList.value = []\r\n    }\r\n    return { loading, finished, goodsList, getData, sortChange, filterChange }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n  .goods-list {\r\n    background-color: #fff;\r\n    padding: 0 25px;\r\n    margin-top: 25px;\r\n    ul {\r\n      display: flex;\r\n      flex-wrap: wrap;\r\n      padding: 0 5px;\r\n      li {\r\n        margin-right: 20px;\r\n        margin-bottom: 20px;\r\n        &:nth-child(5n) {\r\n          margin-right: 0;\r\n        }\r\n      }\r\n    }\r\n  }\r\n</style>\r\n","<template>\r\n  <xtx-bread>\r\n    <xtx-bread-item to=\"/\">首页</xtx-bread-item>\r\n    <xtx-bread-item :key=\"category.top.id\" v-if=\"category.top\" :to=\"`/category/${category.top.id}`\">{{ category.top.name }}</xtx-bread-item>\r\n    <Transition name=\"fade-right\" mode=\"out-in\">\r\n      <xtx-bread-item :key=\"category.sub.id\" v-if=\"category.sub\">{{ category.sub.name }}</xtx-bread-item>\r\n    </Transition>\r\n  </xtx-bread>\r\n</template>\r\n\r\n<script>\r\nimport { useStore } from 'vuex'\r\nimport { useRoute } from 'vue-router'\r\nimport { computed } from 'vue'\r\nexport default {\r\n  name: 'SubBread',\r\n  setup () {\r\n    // 通过计算属性从vuex获取顶级和二级类目信息\r\n    // 数据对象：{top:{id,name},sub:{id,name}}\r\n    const route = useRoute()\r\n    const store = useStore()\r\n    const category = computed(() => {\r\n      const cate = {}\r\n      // 完成获取数据逻辑\r\n      store.state.category.list.forEach(top => {\r\n        if (top.children) {\r\n          const sub = top.children.find(sub => sub.id === route.params.id)\r\n          if (sub) {\r\n            cate.top = { id: top.id, name: top.name }\r\n            cate.sub = { id: sub.id, name: sub.name }\r\n          }\r\n        }\r\n      })\r\n      return cate\r\n    })\r\n    return { category }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n\r\n</style>\r\n","import { render } from \"./SubBread.vue?vue&type=template&id=462ff6a3\"\nimport script from \"./SubBread.vue?vue&type=script&lang=js\"\nexport * from \"./SubBread.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"E:\\\\工作\\\\项目\\\\小兔鲜儿\\\\erabbits-client-pc\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\r\n  <div class=\"sub-filter\" v-if=\"filterData && !filterLoading\">\r\n    <div class=\"item\">\r\n      <div class=\"head\">品牌：</div>\r\n      <div class=\"body\">\r\n        <a href=\"javascript:;\" @click=\"changeBrand(item.id)\" :class=\"{ active: item.id === filterData.selectedBrand }\" v-for=\"item in filterData.brands\" :key=\"item.id\">{{ item.name }}</a>\r\n      </div>\r\n    </div>\r\n    <div class=\"item\" v-for=\"item in filterData.saleProperties\" :key=\"item.id\">\r\n      <div class=\"head\">{{ item.name }}：</div>\r\n      <div class=\"body\">\r\n        <a href=\"javascript:;\" @click=\"changeProp(item, prop.id)\" :class=\"{ active: prop.id === item.selectedProp }\" v-for=\"prop in item.properties\" :key=\"prop.id\">{{ prop.name }}</a>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { ref, watch } from 'vue'\r\nimport { useRoute } from 'vue-router'\r\nimport { findSubCategoryFilter } from '@/api/category'\r\nexport default {\r\n  name: 'SubFilter',\r\n  setup (props, { emit }) {\r\n    const route = useRoute()\r\n    // 监听二级类目ID的变化获取筛选数据\r\n    const filterData = ref(null)\r\n    const filterLoading = ref(false)\r\n    watch(() => route.params.id, (newVal) => {\r\n      // 变化后的ID有值 且 处在二级类名路由下\r\n      if (newVal && `/category/sub/${newVal}` === route.path) {\r\n        filterLoading.value = true\r\n        // 发请求获取数据\r\n        findSubCategoryFilter(route.params.id).then(data => {\r\n          // 每一组可选的筛选条件缺失 全部 条件 处理下数据加上全部\r\n          // 给每一组数据加上一个选中的ID\r\n          // 1.品牌\r\n          data.result.selectedBrand = null\r\n          data.result.brands.unshift({ id: null, name: '全部' })\r\n          // 2.属性\r\n          data.result.saleProperties.forEach(item => {\r\n            item.selectedProp = null\r\n            item.properties.unshift({ id: null, name: '全部' })\r\n          })\r\n          // 设置修改的数据\r\n          filterData.value = data.result\r\n          filterLoading.value = false\r\n        })\r\n      }\r\n    }, { immediate: true })\r\n\r\n    // 获取筛选参数的函数\r\n    const getFilterParams = () => {\r\n      const obj = { brandId: null, attrs: [] }\r\n      // 品牌\r\n      obj.brandId = filterData.value.selectedBrand\r\n      // 销售属性\r\n      filterData.value.saleProperties.forEach(item => {\r\n        if (item.selectedProp) {\r\n          const prop = item.properties.find(prop => prop.id === item.selectedProp)\r\n          obj.attrs.push({ groupName: item.name, propertyName: prop.name })\r\n        }\r\n      })\r\n      // 参考数据\r\n      if (obj.attrs.length === 0) obj.attrs = null\r\n      return obj\r\n    }\r\n    // 1.记录当前选择的品牌\r\n    const changeBrand = (brandId) => {\r\n      if (filterData.value.selectedBrand === brandId) return\r\n      filterData.value.selectedBrand = brandId\r\n      emit('filter-change', getFilterParams())\r\n    }\r\n    // 2.记录选择的销售属性\r\n    const changeProp = (item, propId) => {\r\n      if (item.selectedProp === propId) return\r\n      item.selectedProp = propId\r\n      emit('filter-change', getFilterParams())\r\n    }\r\n    return { filterData, filterLoading, changeBrand, changeProp }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n  // 筛选区\r\n  .sub-filter {\r\n    padding: 25px;\r\n    background-color: #fff;\r\n    .item {\r\n      display: flex;\r\n      line-height: 40px;\r\n      .head {\r\n        width: 80px;\r\n        color: #999;\r\n      }\r\n      .body {\r\n        flex: 1;\r\n        a {\r\n          display: inline-block;\r\n          margin-right: 36px;\r\n          transition: all 0.3s;\r\n          &.active,\r\n          &:hover {\r\n            color: @xtxColor;\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n</style>\r\n","import { render } from \"./SubFilter.vue?vue&type=template&id=1185a853&scoped=true\"\nimport script from \"./SubFilter.vue?vue&type=script&lang=js\"\nexport * from \"./SubFilter.vue?vue&type=script&lang=js\"\n\nimport \"./SubFilter.vue?vue&type=style&index=0&id=1185a853&lang=less&scoped=true\"\n\nimport exportComponent from \"E:\\\\工作\\\\项目\\\\小兔鲜儿\\\\erabbits-client-pc\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-1185a853\"]])\n\nexport default __exports__","<template>\r\n  <div class=\"sub-sort\">\r\n    <div class=\"sort\">\r\n      <a href=\"javascript:;\" :class=\"{ active: sortParams.sortField === null }\" @click=\"changeSort(null)\">默认排序</a>\r\n      <a href=\"javascript:;\" :class=\"{ active: sortParams.sortField === 'publishTime' }\" @click=\"changeSort('publishTime')\">最新商品</a>\r\n      <a href=\"javascript:;\" :class=\"{ active: sortParams.sortField === 'orderNum' }\" @click=\"changeSort('orderNum')\">最高人气</a>\r\n      <a href=\"javascript:;\" :class=\"{ active: sortParams.sortField === 'evaluateNum' }\" @click=\"changeSort('evaluateNum')\">评论最多</a>\r\n      <a href=\"javascript:;\" @click=\"changeSort('price')\">\r\n        价格排序\r\n        <i class=\"arrow up\" :class=\"{ active: sortParams.sortField === 'price' && sortParams.sortMethod === 'asc' }\"></i>\r\n        <i class=\"arrow down\" :class=\"{ active: sortParams.sortField === 'price' && sortParams.sortMethod === 'desc' }\"></i>\r\n      </a>\r\n    </div>\r\n    <div class=\"check\">\r\n      <xtx-checkbox v-model=\"sortParams.inventory\" @click=\"changeCheck\" :class=\"{ active: sortParams.inventory }\"> 仅显示有货商品</xtx-checkbox>\r\n      <xtx-checkbox v-model=\"sortParams.onlyDiscount\" @click=\"changeCheck\" :class=\"{ active: sortParams.onlyDiscount }\"> 仅显示特惠商品</xtx-checkbox>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { reactive } from 'vue'\r\nexport default {\r\n  name: 'SubSort',\r\n  setup (props, { emit }) {\r\n    // 实现交互（实现交换的数据和后台保持一致）\r\n    // 1.明确交互数据\r\n    const sortParams = reactive({\r\n      // 库存\r\n      inventory: false,\r\n      // 特惠折扣\r\n      onlyDiscount: false,\r\n      // 分类 null：默认排序 publishTime：最新商品 orderNum：最高人气 evaluateNum：评论最多 price：价格排序\r\n      sortField: null,\r\n      // 升序 asc 降序 desc 默认为 desc\r\n      sortMethod: null\r\n    })\r\n    // 2.提供模板使用\r\n    // 3.需要绑定按钮的点击事件修改排序字段和排序方式\r\n    const changeSort = (sortField) => {\r\n      if (sortField === 'price') {\r\n        sortParams.sortField = sortField\r\n        // 处理排序\r\n        if (sortParams.sortMethod === null) {\r\n          sortParams.sortMethod = 'desc'\r\n        } else {\r\n          sortParams.sortMethod = sortParams.sortMethod === 'desc' ? 'asc' : 'desc'\r\n        }\r\n      } else {\r\n        // 如果已经选项阻止运行\r\n        if (sortParams.sortField === sortField) return\r\n        sortParams.sortField = sortField\r\n        sortParams.sortMethod = null\r\n      }\r\n      // 触发 sort-change 事件\r\n      emit('sort-change', sortParams)\r\n    }\r\n    const changeCheck = () => {\r\n      // 触发 sort-change 事件\r\n      emit('sort-change', sortParams)\r\n    }\r\n    return { sortParams, changeSort, changeCheck }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n  .sub-sort {\r\n    height: 80px;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: space-between;\r\n    .sort {\r\n      display: flex;\r\n      a {\r\n        position: relative;\r\n        height: 30px;\r\n        padding: 0 20px;\r\n        margin-right: 20px;\r\n        line-height: 28px;\r\n        border: 1px solid #e4e4e4;\r\n        color: #999;\r\n        border-radius: 2px;\r\n        transition: all .3s;\r\n        &.active {\r\n          background-color: @xtxColor;\r\n          border-color: @xtxColor;\r\n          color: #fff;\r\n        }\r\n        .arrow {\r\n          position: absolute;\r\n          border: 5px solid transparent;\r\n          right: 8px;\r\n          &.up {\r\n            top: 3px;\r\n            border-bottom-color: #bbb;\r\n            &.active {\r\n              border-bottom-color: @xtxColor;\r\n            }\r\n          }\r\n          &.down {\r\n            top: 15px;\r\n            border-top-color: #bbb;\r\n            &.active {\r\n              border-top-color: @xtxColor;\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n    .check {\r\n      .xtx-checkbox {\r\n        margin-left: 20px;\r\n        color: #999;\r\n        &.active {\r\n          color: @xtxColor;\r\n        }\r\n      }\r\n    }\r\n  }\r\n</style>\r\n","import { render } from \"./SubSort.vue?vue&type=template&id=7f8bff16&scoped=true\"\nimport script from \"./SubSort.vue?vue&type=script&lang=js\"\nexport * from \"./SubSort.vue?vue&type=script&lang=js\"\n\nimport \"./SubSort.vue?vue&type=style&index=0&id=7f8bff16&lang=less&scoped=true\"\n\nimport exportComponent from \"E:\\\\工作\\\\项目\\\\小兔鲜儿\\\\erabbits-client-pc\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-7f8bff16\"]])\n\nexport default __exports__","import { render } from \"./SubCategory.vue?vue&type=template&id=00440325&scoped=true\"\nimport script from \"./SubCategory.vue?vue&type=script&lang=js\"\nexport * from \"./SubCategory.vue?vue&type=script&lang=js\"\n\nimport \"./SubCategory.vue?vue&type=style&index=0&id=00440325&lang=less&scoped=true\"\n\nimport exportComponent from \"E:\\\\工作\\\\项目\\\\小兔鲜儿\\\\erabbits-client-pc\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-00440325\"]])\n\nexport default __exports__","<template>\r\n  <router-link :to=\"`/product/${goods.id}`\" class=\"goods-item\">\r\n    <img :src=\"goods.picture\" alt=\"\">\r\n    <p class=\"name ellipsis\">{{ goods.name }}</p>\r\n    <p class=\"desc ellipsis\">{{ goods.desc }}</p>\r\n    <p class=\"price\">￥{{ goods.price }}</p>\r\n  </router-link>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'GoodsItem',\r\n  props: {\r\n    goods: {\r\n      type: Object,\r\n      default: () => ({})\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n  .goods-item {\r\n    display: block;\r\n    width: 220px;\r\n    padding: 20px 30px;\r\n    text-align: center;\r\n    // .hoverShadow();\r\n    img {\r\n      width: 160px;\r\n      height: 160px;\r\n    }\r\n    p {\r\n      padding-top: 10px;\r\n    }\r\n    .name {\r\n      font-size: 16px;\r\n    }\r\n    .desc {\r\n      height: 29px;\r\n      color: #999;\r\n    }\r\n    .price {\r\n      color: @priceColor;\r\n      font-size: 20px;\r\n    }\r\n  }\r\n</style>\r\n","import { render } from \"./GoodsItem.vue?vue&type=template&id=7a64b468&scoped=true\"\nimport script from \"./GoodsItem.vue?vue&type=script&lang=js\"\nexport * from \"./GoodsItem.vue?vue&type=script&lang=js\"\n\nimport \"./GoodsItem.vue?vue&type=style&index=0&id=7a64b468&lang=less&scoped=true\"\n\nimport exportComponent from \"E:\\\\工作\\\\项目\\\\小兔鲜儿\\\\erabbits-client-pc\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-7a64b468\"]])\n\nexport default __exports__"],"names":["class","_createElementBlock","_createElementVNode","_createVNode","_component_sub_bread","_component_sub_filter","onFilterChange","$setup","_component_sub_sort","onSortChange","_Fragment","_renderList","goods","key","id","_component_goods_item","_component_xtx_infinite_loading","loading","finished","onInfinite","_createBlock","_component_xtx_bread","_component_xtx_bread_item","to","top","name","_Transition","mode","sub","setup","route","useRoute","store","useStore","category","computed","cate","state","list","forEach","children","find","params","__exports__","_hoisted_3","brands","item","href","onClick","active","selectedBrand","_hoisted_5","saleProperties","_toDisplayString","properties","prop","selectedProp","_hoisted_8","props","emit","filterData","ref","filterLoading","watch","newVal","path","value","findSubCategoryFilter","then","data","result","unshift","immediate","getFilterParams","obj","brandId","attrs","push","groupName","propertyName","length","changeBrand","changeProp","propId","sortField","sortMethod","_component_xtx_checkbox","inventory","$event","onlyDiscount","sortParams","reactive","changeSort","changeCheck","components","SubBread","SubFilter","SubSort","GoodsItem","goodsList","reqParams","page","pageSize","getData","categoryId","findSubCategoryGoods","items","sortChange","filterChange","filterParams","render","_component_router_link","$props","src","picture","alt","desc","price","type","Object","default"],"sourceRoot":""}