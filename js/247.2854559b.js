"use strict";(self["webpackChunkerabbit_client_pc"]=self["webpackChunkerabbit_client_pc"]||[]).push([[247],{6247:function(e,a,t){t.r(a),t.d(a,{default:function(){return T}});var s=t(3396);const r={class:"sub-category"},o={class:"wrapper"},n={class:"goods-list"};function l(e,a,t,l,i,c){const d=(0,s.up)("sub-bread"),u=(0,s.up)("sub-filter"),p=(0,s.up)("sub-sort"),g=(0,s.up)("goods-item"),m=(0,s.up)("xtx-infinite-loading");return(0,s.wg)(),(0,s.iD)("div",r,[(0,s._)("div",o,[(0,s.Wm)(d),(0,s.Wm)(u,{onFilterChange:l.filterChange},null,8,["onFilterChange"]),(0,s._)("div",n,[(0,s.Wm)(p,{onSortChange:l.sortChange},null,8,["onSortChange"]),(0,s._)("ul",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.goodsList,(e=>((0,s.wg)(),(0,s.iD)("li",{key:e.id},[(0,s.Wm)(g,{goods:e},null,8,["goods"])])))),128))]),(0,s.Wm)(m,{loading:l.loading,finished:l.finished,onInfinite:l.getData},null,8,["loading","finished","onInfinite"])])])])}var i=t(7139),c=t(9242);const d=(0,s.Uk)("首页");function u(e,a,t,r,o,n){const l=(0,s.up)("xtx-bread-item"),u=(0,s.up)("xtx-bread");return(0,s.wg)(),(0,s.j4)(u,null,{default:(0,s.w5)((()=>[(0,s.Wm)(l,{to:"/"},{default:(0,s.w5)((()=>[d])),_:1}),r.category.top?((0,s.wg)(),(0,s.j4)(l,{key:r.category.top.id,to:`/category/${r.category.top.id}`},{default:(0,s.w5)((()=>[(0,s.Uk)((0,i.zw)(r.category.top.name),1)])),_:1},8,["to"])):(0,s.kq)("",!0),(0,s.Wm)(c.uT,{name:"fade-right",mode:"out-in"},{default:(0,s.w5)((()=>[r.category.sub?((0,s.wg)(),(0,s.j4)(l,{key:r.category.sub.id},{default:(0,s.w5)((()=>[(0,s.Uk)((0,i.zw)(r.category.sub.name),1)])),_:1})):(0,s.kq)("",!0)])),_:1})])),_:1})}var p=t(65),g=t(678),m={name:"SubBread",setup(){const e=(0,g.yj)(),a=(0,p.oR)(),t=(0,s.Fl)((()=>{const t={};return a.state.category.list.forEach((a=>{if(a.children){const s=a.children.find((a=>a.id===e.params.id));s&&(t.top={id:a.id,name:a.name},t.sub={id:s.id,name:s.name})}})),t}));return{category:t}}},h=t(89);const v=(0,h.Z)(m,[["render",u]]);var f=v;const _=e=>((0,s.dD)("data-v-1185a853"),e=e(),(0,s.Cn)(),e),b={key:0,class:"sub-filter"},k={class:"item"},C=_((()=>(0,s._)("div",{class:"head"},"品牌：",-1))),w={class:"body"},y=["onClick"],P={class:"head"},D={class:"body"},S=["onClick"];function j(e,a,t,r,o,n){return r.filterData&&!r.filterLoading?((0,s.wg)(),(0,s.iD)("div",b,[(0,s._)("div",k,[C,(0,s._)("div",w,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(r.filterData.brands,(e=>((0,s.wg)(),(0,s.iD)("a",{href:"javascript:;",onClick:a=>r.changeBrand(e.id),class:(0,i.C_)({active:e.id===r.filterData.selectedBrand}),key:e.id},(0,i.zw)(e.name),11,y)))),128))])]),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(r.filterData.saleProperties,(e=>((0,s.wg)(),(0,s.iD)("div",{class:"item",key:e.id},[(0,s._)("div",P,(0,i.zw)(e.name)+"：",1),(0,s._)("div",D,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.properties,(a=>((0,s.wg)(),(0,s.iD)("a",{href:"javascript:;",onClick:t=>r.changeProp(e,a.id),class:(0,i.C_)({active:a.id===e.selectedProp}),key:a.id},(0,i.zw)(a.name),11,S)))),128))])])))),128))])):(0,s.kq)("",!0)}var F=t(4870),I=t(1005),z={name:"SubFilter",setup(e,{emit:a}){const t=(0,g.yj)(),r=(0,F.iH)(null),o=(0,F.iH)(!1);(0,s.YP)((()=>t.params.id),(e=>{e&&`/category/sub/${e}`===t.path&&(o.value=!0,(0,I.qu)(t.params.id).then((e=>{e.result.selectedBrand=null,e.result.brands.unshift({id:null,name:"全部"}),e.result.saleProperties.forEach((e=>{e.selectedProp=null,e.properties.unshift({id:null,name:"全部"})})),r.value=e.result,o.value=!1})))}),{immediate:!0});const n=()=>{const e={brandId:null,attrs:[]};return e.brandId=r.value.selectedBrand,r.value.saleProperties.forEach((a=>{if(a.selectedProp){const t=a.properties.find((e=>e.id===a.selectedProp));e.attrs.push({groupName:a.name,propertyName:t.name})}})),0===e.attrs.length&&(e.attrs=null),e},l=e=>{r.value.selectedBrand!==e&&(r.value.selectedBrand=e,a("filter-change",n()))},i=(e,t)=>{e.selectedProp!==t&&(e.selectedProp=t,a("filter-change",n()))};return{filterData:r,filterLoading:o,changeBrand:l,changeProp:i}}};const x=(0,h.Z)(z,[["render",j],["__scopeId","data-v-1185a853"]]);var B=x;const H={class:"sub-sort"},W={class:"sort"},M=(0,s.Uk)(" 价格排序 "),U={class:"check"},Z=(0,s.Uk)(" 仅显示有货商品"),N=(0,s.Uk)(" 仅显示特惠商品");function V(e,a,t,r,o,n){const l=(0,s.up)("xtx-checkbox");return(0,s.wg)(),(0,s.iD)("div",H,[(0,s._)("div",W,[(0,s._)("a",{href:"javascript:;",class:(0,i.C_)({active:null===r.sortParams.sortField}),onClick:a[0]||(a[0]=e=>r.changeSort(null))},"默认排序",2),(0,s._)("a",{href:"javascript:;",class:(0,i.C_)({active:"publishTime"===r.sortParams.sortField}),onClick:a[1]||(a[1]=e=>r.changeSort("publishTime"))},"最新商品",2),(0,s._)("a",{href:"javascript:;",class:(0,i.C_)({active:"orderNum"===r.sortParams.sortField}),onClick:a[2]||(a[2]=e=>r.changeSort("orderNum"))},"最高人气",2),(0,s._)("a",{href:"javascript:;",class:(0,i.C_)({active:"evaluateNum"===r.sortParams.sortField}),onClick:a[3]||(a[3]=e=>r.changeSort("evaluateNum"))},"评论最多",2),(0,s._)("a",{href:"javascript:;",onClick:a[4]||(a[4]=e=>r.changeSort("price"))},[M,(0,s._)("i",{class:(0,i.C_)(["arrow up",{active:"price"===r.sortParams.sortField&&"asc"===r.sortParams.sortMethod}])},null,2),(0,s._)("i",{class:(0,i.C_)(["arrow down",{active:"price"===r.sortParams.sortField&&"desc"===r.sortParams.sortMethod}])},null,2)])]),(0,s._)("div",U,[(0,s.Wm)(l,{modelValue:r.sortParams.inventory,"onUpdate:modelValue":a[5]||(a[5]=e=>r.sortParams.inventory=e),onClick:r.changeCheck,class:(0,i.C_)({active:r.sortParams.inventory})},{default:(0,s.w5)((()=>[Z])),_:1},8,["modelValue","onClick","class"]),(0,s.Wm)(l,{modelValue:r.sortParams.onlyDiscount,"onUpdate:modelValue":a[6]||(a[6]=e=>r.sortParams.onlyDiscount=e),onClick:r.changeCheck,class:(0,i.C_)({active:r.sortParams.onlyDiscount})},{default:(0,s.w5)((()=>[N])),_:1},8,["modelValue","onClick","class"])])])}var Y={name:"SubSort",setup(e,{emit:a}){const t=(0,F.qj)({inventory:!1,onlyDiscount:!1,sortField:null,sortMethod:null}),s=e=>{if("price"===e)t.sortField=e,null===t.sortMethod?t.sortMethod="desc":t.sortMethod="desc"===t.sortMethod?"asc":"desc";else{if(t.sortField===e)return;t.sortField=e,t.sortMethod=null}a("sort-change",t)},r=()=>{a("sort-change",t)};return{sortParams:t,changeSort:s,changeCheck:r}}};const q=(0,h.Z)(Y,[["render",V],["__scopeId","data-v-7f8bff16"]]);var K=q,L=t(5076),$={name:"SubCategory",components:{SubBread:f,SubFilter:B,SubSort:K,GoodsItem:L.Z},setup(){const e=(0,g.yj)(),a=(0,F.iH)(!1),t=(0,F.iH)(!1),r=(0,F.iH)([]);let o={page:1,pageSize:20};const n=()=>{a.value=!0,o.categoryId=e.params.id,(0,I.Sm)(o).then((({result:e})=>{e.items.length?(r.value.push(...e.items),o.page++):t.value=!0,a.value=!1}))};(0,s.YP)((()=>e.params.id),(a=>{a&&`/category/sub/${a}`===e.path&&(t.value=!1,r.value=[],o={page:1,pageSize:20})}));const l=e=>{t.value=!1,o={...o,...e},o.page=1,r.value=[]},i=e=>{t.value=!1,o={...o,...e},o.page=1,r.value=[]};return{loading:a,finished:t,goodsList:r,getData:n,sortChange:l,filterChange:i}}};const E=(0,h.Z)($,[["render",l],["__scopeId","data-v-00440325"]]);var T=E},5076:function(e,a,t){t.d(a,{Z:function(){return g}});var s=t(3396),r=t(7139);const o=["src"],n={class:"name ellipsis"},l={class:"desc ellipsis"},i={class:"price"};function c(e,a,t,c,d,u){const p=(0,s.up)("router-link");return(0,s.wg)(),(0,s.j4)(p,{to:`/product/${t.goods.id}`,class:"goods-item"},{default:(0,s.w5)((()=>[(0,s._)("img",{src:t.goods.picture,alt:""},null,8,o),(0,s._)("p",n,(0,r.zw)(t.goods.name),1),(0,s._)("p",l,(0,r.zw)(t.goods.desc),1),(0,s._)("p",i,"￥"+(0,r.zw)(t.goods.price),1)])),_:1},8,["to"])}var d={name:"GoodsItem",props:{goods:{type:Object,default:()=>({})}}},u=t(89);const p=(0,u.Z)(d,[["render",c],["__scopeId","data-v-7a64b468"]]);var g=p}}]);
//# sourceMappingURL=247.2854559b.js.map