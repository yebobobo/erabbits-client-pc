{"version":3,"file":"js/688.78c83801.js","mappings":"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","sources":["webpack://erabbit-client-pc/./src/views/Login/Login.vue","webpack://erabbit-client-pc/./src/views/Login/components/LoginHeader.vue","webpack://erabbit-client-pc/./src/views/Login/components/LoginHeader.vue?9ab6","webpack://erabbit-client-pc/./src/views/Login/components/LoginForm.vue","webpack://erabbit-client-pc/./src/views/Login/components/LoginForm.vue?8837","webpack://erabbit-client-pc/./src/views/Login/components/LoginFooter.vue","webpack://erabbit-client-pc/./src/views/Login/components/LoginFooter.vue?a0e9","webpack://erabbit-client-pc/./src/views/Login/Login.vue?525a"],"sourcesContent":["<template>\r\n  <!-- 头部组件 -->\r\n  <login-header></login-header>\r\n  <!-- 表单部分 -->\r\n  <div class=\"login-main\">\r\n    <div class=\"box\">\r\n      <nav>\r\n        <!-- :class = { active: 布尔值 } 动态切换 class 类名 布尔值为true 则处于激活状态-->\r\n        <a href=\"javascript:;\" @click=\"activeName='account'\" :class=\"{ active : activeName === 'account' }\">账户登录</a>\r\n        <a href=\"javascript:;\" @click=\"activeName='qrcode'\" :class=\"{ active : activeName === 'qrcode' }\">扫码登录</a>\r\n      </nav>\r\n      <!-- 账户登录 -->\r\n      <login-form v-if=\"activeName==='account'\">表单</login-form>\r\n      <!-- 扫码登录 -->\r\n      <div class=\"qrcode-box\" v-if=\"activeName === 'qrcode'\">\r\n        <img src=\"@/assets/images/qrcode.jpg\" />\r\n        <p>打开 <a href=\"javascript:;\">小兔鲜儿App</a> 扫码登录</p>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <!-- 底部组件 -->\r\n  <login-footer></login-footer>\r\n</template>\r\n\r\n<script>\r\nimport LoginHeader from '@/views/Login/components/LoginHeader.vue'\r\nimport LoginForm from '@/views/Login/components/LoginForm.vue'\r\nimport LoginFooter from '@/views/Login/components/LoginFooter.vue'\r\n\r\nimport { ref } from 'vue'\r\nimport { useStore } from 'vuex'\r\nimport { useRoute } from 'vue-router'\r\nexport default {\r\n  name: 'XtxLogin',\r\n  components: {\r\n    LoginHeader,\r\n    LoginForm,\r\n    LoginFooter\r\n  },\r\n  // 为使用组合式api\r\n  // 位于 created 和 beforeCreated之前，用于替代 created 和 beforeCreated\r\n  // 在setup函数中不能访问到this\r\n  setup () {\r\n    // 在setup中使用ref函数，创建响应式数据\r\n    const activeName = ref('account')\r\n    // 存储回跳地址\r\n    // useStore: 在组件的setup(中监听vuex里某个state的变化\r\n    const store = useStore()\r\n    // useRouter: 相当于vue2的this.$route表示当前激活的路由的状态信息\r\n    const route = useRoute()\r\n    // store.commit() 进行状态变更\r\n    // commit()方法传值给vuex的 mutation 改变 state\r\n    // commit()：用来提交当前模块的mutations\r\n    store.commit('user/setRedirectUrl', route.query.redirectUrl || '/')\r\n    return { activeName }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n  .login-main {\r\n    position: relative;\r\n    height: 488px;\r\n    background-image: url('@/assets/images/login-bg.png');\r\n    .box {\r\n      position: absolute;\r\n      right: 24%;\r\n      top: 54px;\r\n      width: 380px;\r\n      min-height: 360px;\r\n      padding: 20px 40px;\r\n      background-color: #fff;\r\n      box-shadow: 0 0 10px rgba(0, 0, 0, .15);\r\n      nav {\r\n        display: flex;\r\n        justify-content: space-between;\r\n        position: relative;\r\n        // height: 35px;\r\n        &::before {\r\n          content: \"\";\r\n          position: absolute;\r\n          left: 50%;\r\n          top: 8px;\r\n          width: 1px;\r\n          height: 20px;\r\n          background-color: #ededed;\r\n        }\r\n        a {\r\n          height: 35px;\r\n          line-height: 35px;\r\n          font-size: 18px;\r\n          &.active {\r\n            border-bottom: 2px solid @xtxColor;\r\n          }\r\n        }\r\n      }\r\n      // 二维码容器\r\n      .qrcode-box {\r\n        text-align: center;\r\n        padding-top: 40px;\r\n        p {\r\n          margin-top: 10px;\r\n          font-size: 16px;\r\n          a {\r\n            color: @xtxColor;\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n</style>\r\n","<template>\r\n  <div class=\"login-header wrapper\">\r\n    <h1 class=\"logo\">小兔鲜儿</h1>\r\n    <router-link to=\"/\">\r\n      进入网站首页\r\n      <i class=\"iconfont icon-angleright\"></i>\r\n      <i class=\"iconfont icon-angleright\"></i>\r\n    </router-link>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'LoginHeader'\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n  .login-header {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n    height: 130px;\r\n    .logo {\r\n      width: 200px;\r\n      height: 100%;\r\n      background: url('@/assets/images/logo.png') no-repeat center 18px / contain;\r\n      text-indent: -9999px;\r\n    }\r\n    a {\r\n      display: inline-block;\r\n      margin-top: 50px;\r\n      font-size: 16px;\r\n      i {\r\n        color: @xtxColor;\r\n        font-size: 12px;\r\n        letter-spacing: -.5em;\r\n        &:last-child {\r\n          opacity: .5;\r\n        }\r\n      }\r\n    }\r\n  }\r\n</style>\r\n","import { render } from \"./LoginHeader.vue?vue&type=template&id=6f5c273a&scoped=true\"\nimport script from \"./LoginHeader.vue?vue&type=script&lang=js\"\nexport * from \"./LoginHeader.vue?vue&type=script&lang=js\"\n\nimport \"./LoginHeader.vue?vue&type=style&index=0&id=6f5c273a&lang=less&scoped=true\"\n\nimport exportComponent from \"E:\\\\工作\\\\项目\\\\小兔鲜儿\\\\erabbits-client-pc\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-6f5c273a\"]])\n\nexport default __exports__","<template>\r\n  <div class=\"login-form\">\r\n    <div class=\"toggle\">\r\n      <a href=\"javascript:;\" @click=\"isMsgLogin=false\" v-if=\"isMsgLogin\">密码登录</a>\r\n      <a href=\"javascript:;\" @click=\"isMsgLogin=true\" v-else>手机验证码登录</a>\r\n    </div>\r\n    <!--\r\n      Form替代原生form\r\n      必要属性：validation-schema属性值为包含校验规则函数的对象名\r\n      autocomplete:自动提示off关\r\n      ref绑定DOM元素\r\n      v-slot作用域插槽\r\n    -->\r\n    <Form :validation-schema=\"schema\" ref=\"formCom\" v-slot=\"{ errors }\" autocomplete=\"off\" class=\"form\">\r\n      <!--\r\n        template使用情况：\r\n          1.根据某个状态渲染多个模板的 v-if v-else\r\n          2.插槽\r\n       -->\r\n       <!-- 密码登录form表单界面 -->\r\n      <template v-if=\"!isMsgLogin\">\r\n        <!-- 用户名 -->\r\n        <div class=\"form-item\">\r\n          <div class=\"input\">\r\n            <i class=\"iconfont icon-jurassic_user\"></i>\r\n            <!--\r\n              Field替代原生input\r\n              必要属性：v-model为双向绑定的表单数据，name属性值schema对象中对应的校验函数名\r\n             -->\r\n            <Field v-model=\"form.account\" name=\"account\" type=\"text\" placeholder=\"请输入用户名\" :class=\"{ error : errors.account }\"></Field>\r\n          </div>\r\n          <div class=\"error\" v-if=\"errors.account\">\r\n            <i class=\"iconfont icon-warning\"></i>\r\n            {{ errors.account }}\r\n          </div>\r\n        </div>\r\n        <!-- 密码 -->\r\n        <div class=\"form-item\">\r\n          <div class=\"input\">\r\n            <i class=\"iconfont icon-jiesuo\"></i>\r\n            <Field v-model=\"form.password\" name=\"password\" type=\"password\" placeholder=\"请输入密码\" :class=\"{ error: errors.password }\"></Field>\r\n          </div>\r\n          <div class=\"error\" v-if=\"errors.password\">\r\n            <i class=\"iconfont icon-warning\"></i>\r\n            {{ errors.password }}\r\n          </div>\r\n        </div>\r\n      </template>\r\n      <!-- 手机验证码登录form表单界面 -->\r\n      <template v-else>\r\n        <!-- 手机号 -->\r\n        <div class=\"form-item\">\r\n          <div class=\"input\">\r\n            <i class=\"iconfont icon-phone\"></i>\r\n            <Field v-model=\"form.mobile\" name=\"mobile\" type=\"text\" placeholder=\"请输入手机号\" :class=\"{ error: errors.mobile }\"></Field>\r\n          </div>\r\n          <div class=\"error\" v-if=\"errors.mobile\">\r\n            <i class=\"iconfont icon-warning\"></i>\r\n            {{ errors.mobile }}\r\n          </div>\r\n        </div>\r\n        <!-- 验证码 -->\r\n        <div class=\"form-item\">\r\n          <div class=\"input\">\r\n            <i class=\"iconfont icon-xiaoxi\"></i>\r\n            <Field v-model=\"form.code\" name=\"code\" type=\"text\" placeholder=\"请输入验证码\" :class=\"{ error: errors.code }\"></Field>\r\n            <span class=\"code\" @click=\"send()\">\r\n              {{ time === 0 ? '发送验证码' : `${time}秒后发送` }}\r\n            </span>\r\n          </div>\r\n          <div class=\"error\" v-if=\"errors.code\">\r\n            <i class=\"iconfont icon-warning\"></i>\r\n            {{ errors.code }}\r\n          </div>\r\n        </div>\r\n      </template>\r\n      <!-- 我同意 -->\r\n      <div class=\"form-item\">\r\n        <div class=\"agree\">\r\n          <xtx-checkbox v-model=\"form.isAgree\"></xtx-checkbox>\r\n          <Field as=\"XtxCheckbox\" name=\"isAgree\" v-model=\"form.isAgree\" :class=\"{ error: errors.isAgree }\">\r\n            <span>我已同意</span>\r\n            <a href=\"javascript:;\">《隐私条款》</a>\r\n            <span>和</span>\r\n            <a href=\"javascript:;\">《服务条款》</a>\r\n          </Field>\r\n        </div>\r\n        <div class=\"error\" v-if=\"errors.isAgree\">\r\n          <i class=\"iconfont icon-warning\"></i>\r\n          {{ errors.isAgree }}\r\n        </div>\r\n      </div>\r\n      <!-- 登录按钮 -->\r\n      <a href=\"javascript:;\" class=\"btn\" @click=\"login()\">登录</a>\r\n    </Form>\r\n    <div class=\"action\">\r\n      <a href=\"javascript:;\">忘记密码？</a>\r\n      <a href=\"https://graph.qq.com/oauth2.0/authorize?client_id=100556005&response_type=token&scope=all&redirect_uri=http%3A%2F%2Fwww.corho.com%3A8080%2F%23%2Flogin%2Fcallback\">\r\n        <img src=\"https://qzonestyle.gtimg.cn/qzone/vas/opensns/res/img/Connect_logo_7.png\" alt=\"\">\r\n      </a>\r\n      <router-link to=\"/register\">免费注册</router-link>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { ref, reactive, watch, onUnmounted } from 'vue'\r\nimport { Form, Field } from 'vee-validate'\r\nimport schema from '@/utils/vee-validate-schema.js'\r\nimport { userMobileLogin, userAccountLogin, userMobileLoginMsg } from '@/api/user.js'\r\nimport { ElMessage } from 'element-plus'\r\nimport { useStore } from 'vuex'\r\n// import { useRoute, useRouter } from 'vue-router'\r\n// useIntervalFn：实现验证码倒计时\r\nimport { useIntervalFn } from '@vueuse/core'\r\nexport default {\r\n  name: 'LoginForm',\r\n  components: {\r\n    Form,\r\n    Field\r\n  },\r\n  setup () {\r\n    // 切换短信登录\r\n    // ref将数据变成响应式数据\r\n    // 当数据发生变化时UI自动更新\r\n    // ref用于基本数据类型\r\n    const isMsgLogin = ref(false)\r\n\r\n    // 表单数据对象\r\n    // reactive将数据变成响应式数据\r\n    // 当数据发生变化时UI自动更新\r\n    // reactive用于复杂数据类型，对象\r\n    const form = reactive({\r\n      account: null,\r\n      password: null,\r\n      mobile: null,\r\n      code: null,\r\n      isAgree: true\r\n    })\r\n\r\n    // 定义校验规则\r\n    const mySchema = {\r\n      // 校验函数规则：返回true是校验成功，返回一个字符串就是失败，字符串就是错误提示\r\n      // 用户名\r\n      account: schema.account,\r\n      // 密码\r\n      password: schema.password,\r\n      // 手机号\r\n      mobile: schema.mobile,\r\n      // 验证码\r\n      code: schema.code,\r\n      // 是否同意\r\n      isAgree: schema.isAgree\r\n    }\r\n\r\n    // 监听isMsgLogin重置表单 （数据+清除校验结果）\r\n    const formCom = ref(null)\r\n    watch(isMsgLogin, () => {\r\n      // 重置数据\r\n      form.account = null\r\n      form.password = null\r\n      form.mobile = null\r\n      form.code = null\r\n      form.isAgree = true\r\n      // 如果没有销毁Field组件，之前的校验结果不会清除\r\n      // Form组件提供了一个resetForm函数清除校验规则\r\n      formCom.value.resetForm()\r\n    })\r\n\r\n    // 需要在点击登录的时候对整体表单进行校验\r\n    const store = useStore()\r\n    // const router = useRouter()\r\n    // const route = useRoute()\r\n    const login = async () => {\r\n      // Form组件提供了一个validate函数作为整体表单校验 返回一个Promise\r\n      const valid = await formCom.value.validate()\r\n      if (valid) {\r\n        try {\r\n          let data = null\r\n          if (isMsgLogin.value) {\r\n            // 手机号登录\r\n            // 1.准备一个API做手机号登录\r\n            // 2.调用API函数\r\n            // 3.成功：储存用户信息+跳转至来源页或首页+消息提示\r\n            // 4.失败：消息提示\r\n            const { mobile, code } = form\r\n            data = await userMobileLogin({ mobile, code })\r\n          } else {\r\n            // 账号登录\r\n            // 1.准备一个API做账户登录\r\n            // 2.调用API函数\r\n            // 3.成功：储存用户信息+跳转至来源页或首页+消息提示\r\n            // 4.失败：消息提示\r\n            const { account, password } = form\r\n            data = await userAccountLogin({ account, password })\r\n          }\r\n          // 存储用户信息\r\n          const { id, account, avatar, mobile, nickname, token } = data.result\r\n          store.commit('user/setUser', { id, account, avatar, mobile, nickname, token })\r\n        } catch (e) {\r\n          if (e.response.data) {\r\n            ElMessage({\r\n              message: e.response.data.message || '登录失败',\r\n              type: 'error'\r\n            })\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    // 发送验证码\r\n    // pause 暂停 resume 开始\r\n    // useIntervalFn(回调函数, 执行间隔,是否立即开启)\r\n    const time = ref(0)\r\n    const { pause, resume } = useIntervalFn(() => {\r\n      time.value--\r\n      if (time.value <= 0) {\r\n        // 时间小于0，暂停\r\n        pause()\r\n      }\r\n    }, 1000, { immediate: false }\r\n    )\r\n    onUnmounted(() => {\r\n      pause()\r\n    })\r\n\r\n    // 发送验证码\r\n    // 1. 绑定发送验证码按钮点击事件\r\n    // 2.校验手机号，如果成功才去发送短信（定义API） 请求成功开启60S的倒计时，不能再次点击，倒计时结束恢复\r\n    // 3.如果失败 失败的校验样式显示出来\r\n    const send = async () => {\r\n      const valid = mySchema.mobile(form.mobile)\r\n      if (valid === true) {\r\n        // valid为true通过\r\n        if (time.value === 0) {\r\n          // 没有倒计时才可以发送\r\n          await userMobileLoginMsg(form.mobile)\r\n          ElMessage({\r\n            message: '发送成功',\r\n            type: 'success'\r\n          })\r\n          time.value = 60\r\n          // 开始\r\n          resume()\r\n        }\r\n      } else {\r\n        // 失败，使用vee的错误函数显示错误信息 setFieldError(字段,错误信息)\r\n        formCom.value.setFieldError('mobile', valid)\r\n      }\r\n    }\r\n    return { isMsgLogin, form, schema: mySchema, formCom, login, time, send }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n  .login-form {\r\n    .toggle {\r\n      padding-top: 15px;\r\n      text-align: right;\r\n      a {\r\n        color: @xtxColor;\r\n      }\r\n    }\r\n    .form {\r\n      // .form-item\r\n      &-item {\r\n        margin-bottom: 24px;\r\n        .input {\r\n          position: relative;\r\n          height: 36px;\r\n          margin-top: 17px;\r\n          > i {\r\n            position: absolute;\r\n            left: 1px;\r\n            top: 1px;\r\n            width: 34px;\r\n            height: 34px;\r\n            background-color: #cfcdcd;\r\n            color: #fff;\r\n            font-size: 18px;\r\n            line-height: 34px;\r\n            text-align: center;\r\n          }\r\n          input {\r\n            width: 100%;\r\n            height: 36px;\r\n            padding-left: 44px;\r\n            border: 1px solid #cfcdcd;\r\n            line-height: 36px;\r\n            &.active,\r\n            &:focus {\r\n              border-color: @xtxColor;\r\n            }\r\n            &.error {\r\n              border-color: @priceColor;\r\n            }\r\n          }\r\n          .code {\r\n            position: absolute;\r\n            right: 1px;\r\n            top: 1px;\r\n            width: 90px;\r\n            height: 34px;\r\n            background-color: #f5f5f5;\r\n            color: #666;\r\n            text-align: center;\r\n            line-height: 34px;\r\n            cursor: pointer;\r\n          }\r\n        }\r\n        >.error {\r\n          position: absolute;\r\n          font-size: 12px;\r\n          line-height: 24px;\r\n          color: @priceColor;\r\n          i {\r\n            font-size: 14px;\r\n            margin-right: 2px;\r\n          }\r\n        }\r\n        .agree {\r\n          // padding: 17px 0;\r\n          color: #b3b3b3;\r\n          a {\r\n            color: #069;\r\n          }\r\n        }\r\n      }\r\n      .btn {\r\n        display: block;\r\n        width: 100%;\r\n        height: 40px;\r\n        background-color: @xtxColor;\r\n        color: #fff;\r\n        text-align: center;\r\n        line-height: 40px;\r\n        &.disabled {\r\n          background-color: #cfcdcd;\r\n        }\r\n      }\r\n    }\r\n    .action {\r\n      display: flex;\r\n      justify-content: space-between;\r\n      align-items: center;\r\n      padding: 20px 0;\r\n    }\r\n  }\r\n</style>\r\n","import { render } from \"./LoginForm.vue?vue&type=template&id=4216265d&scoped=true\"\nimport script from \"./LoginForm.vue?vue&type=script&lang=js\"\nexport * from \"./LoginForm.vue?vue&type=script&lang=js\"\n\nimport \"./LoginForm.vue?vue&type=style&index=0&id=4216265d&lang=less&scoped=true\"\n\nimport exportComponent from \"E:\\\\工作\\\\项目\\\\小兔鲜儿\\\\erabbits-client-pc\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-4216265d\"]])\n\nexport default __exports__","<template>\r\n  <div class=\"login-footer\">\r\n    <p>\r\n      <a href=\"javascript:;\">关于我们</a>\r\n      <a href=\"javascript:;\">帮助中心</a>\r\n      <a href=\"javascript:;\">售后服务</a>\r\n      <a href=\"javascript:;\">配送与验收</a>\r\n      <a href=\"javascript:;\">商务合作</a>\r\n      <a href=\"javascript:;\">搜索推荐</a>\r\n      <a href=\"javascript:;\">友情链接</a>\r\n    </p>\r\n    <p>CopyRight © 小兔鲜儿</p>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'LoginFooter'\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n  .login-footer {\r\n    height: 115px;\r\n    padding-top: 40px;\r\n    font-size: 15px;\r\n    color: #999;\r\n    text-align: center;\r\n    p {\r\n      margin-bottom: 20px;\r\n      a {\r\n        display: inline-block;\r\n        padding: 0 10px;\r\n        border-right: 1px solid #999;\r\n        color: #999;\r\n        line-height: 1;\r\n        &:last-child {\r\n          border-right: none;\r\n        }\r\n      }\r\n    }\r\n  }\r\n</style>\r\n","import { render } from \"./LoginFooter.vue?vue&type=template&id=11fcbee4&scoped=true\"\nimport script from \"./LoginFooter.vue?vue&type=script&lang=js\"\nexport * from \"./LoginFooter.vue?vue&type=script&lang=js\"\n\nimport \"./LoginFooter.vue?vue&type=style&index=0&id=11fcbee4&lang=less&scoped=true\"\n\nimport exportComponent from \"E:\\\\工作\\\\项目\\\\小兔鲜儿\\\\erabbits-client-pc\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-11fcbee4\"]])\n\nexport default __exports__","import { render } from \"./Login.vue?vue&type=template&id=db876278&scoped=true\"\nimport script from \"./Login.vue?vue&type=script&lang=js\"\nexport * from \"./Login.vue?vue&type=script&lang=js\"\n\nimport \"./Login.vue?vue&type=style&index=0&id=db876278&lang=less&scoped=true\"\n\nimport exportComponent from \"E:\\\\工作\\\\项目\\\\小兔鲜儿\\\\erabbits-client-pc\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-db876278\"]])\n\nexport default __exports__"],"names":["class","_createElementVNode","src","_imports_0","href","_hoisted_5","_hoisted_6","_createVNode","_component_login_header","onClick","$setup","active","_createBlock","_component_login_form","key","_createElementBlock","_hoisted_7","_component_login_footer","_hoisted_2","_component_router_link","to","name","__exports__","alt","_component_Form","ref","autocomplete","errors","_Fragment","_hoisted_15","_component_Field","mobile","$event","type","placeholder","error","_hoisted_17","_toDisplayString","_hoisted_20","code","_hoisted_22","account","_hoisted_10","password","_hoisted_12","_component_xtx_checkbox","isAgree","as","_hoisted_25","_hoisted_26","_hoisted_27","_hoisted_28","_hoisted_30","_hoisted_32","_hoisted_33","setup","mySchema","schema","watch","isMsgLogin","form","formCom","value","valid","data","nickname","token","store","commit","id","avatar","ElMessage","useIntervalFn","pause","time","userMobileLoginMsg","message","resume","login","send","_hoisted_4","components","LoginHeader","LoginForm","LoginFooter","activeName","useStore","route","useRoute","query","redirectUrl","render"],"sourceRoot":""}